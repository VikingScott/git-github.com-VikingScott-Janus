source("~/Desktop/GDP_CPI_Panel/Greenbook.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Greenbook.R", echo = TRUE)
# 查看一下前几行，确保读取正确
print(tail(df_gdp_clean))
source("~/Desktop/GDP_CPI_Panel/Greenbook.R", echo = TRUE)
# ==============================================================================
# 4. 保存
# ==============================================================================
output_path <- path(process_dir, "fred_daily_cleaned.csv")
source("~/Desktop/GDP_CPI_Panel/02_fetch_fred.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/02_fetch_fred.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/02_fetch_fred.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Cleveland_inflation_nowcast.R", echo = TRUE)
# 4. 执行拼接逻辑 (The Stitch)
# ------------------------------------------------------------------------------
df_final <- df_merged %>%
mutate(
# --- 核心变量 1: 增长 (Growth) ---
# 逻辑: 2017前信Greenbook(F0)，2017后信GDPNow
# 两者都是季调后环比折年率 (SAAR)，单位一致
Macro_Growth = if_else(Date < SPLICE_DATE, GB_GDP_Now, Fred_GDP_Now),
# --- 核心变量 2: 核心通胀 (Core Inflation) ---
# 逻辑: 2017前信Greenbook(F0)，2017后信Cleveland(季度环比折年率)
# 这里的 Gap 只有 0.03%，拼接非常完美
Macro_Inflation_Core = if_else(Date < SPLICE_DATE, GB_CPI_Core, Cleveland_CPI_Core_Q),
# --- 核心变量 3: 整体通胀 (Headline Inflation) ---
# 逻辑: 同上
Macro_Inflation_Head = if_else(Date < SPLICE_DATE, GB_CPI_Head, Cleveland_CPI_Head_Q),
# --- 风控/市场信号 (直接来自 FRED) ---
Signal_YieldCurve = Yield_10Y2Y,     # 10Y-2Y 利差
Signal_Risk       = Credit_Spread,   # 信用利差
Signal_VIX        = VIX              # 恐慌指数
) %>%
# 5. 最终清洗
# ------------------------------------------------------------------------------
# 只保留我们策略需要的最终列
select(Date,
Macro_Growth,
Macro_Inflation_Core,
Macro_Inflation_Head,
Signal_YieldCurve,
Signal_Risk,
Signal_VIX) %>%
# 再次向前填充 (防止拼接处可能有微小的空隙)
fill(everything(), .direction = "down") %>%
# 去除头部缺失值 (等待所有指标都有数的那一天开始)
drop_na()
source("~/Desktop/GDP_CPI_Panel/macro_panel.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Growth.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Growth.R", echo = TRUE)
# ---- 生成 Return 表 (Long Format) ----
# 这种格式最适合计算： Date | Ticker | Return
dt_return_out <- dt_all_growth[, .(date, ticker, return)]
source("~/Desktop/GDP_CPI_Panel/Growth.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/deflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/Inflation.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/cash_return.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/cash_return.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/cash_return.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/asset_aggregate.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/asset_check.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/gold_monthly_amend.R", echo = TRUE)
source("~/Desktop/GDP_CPI_Panel/asset_check.R", echo = TRUE)
